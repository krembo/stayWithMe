(function(e){e.fn.stayWithMe=function(t){var n=this,r=n.width(),i=n.height();var s=e.extend(true,{screen:false,screenStyle:{background:"#fff",opacity:.8,zIndex:10},style:{color:"#fff",backgroundColor:"#4679bd",borderRadius:10,padding:"20px 15px",width:r,height:i,minWidth:200,minHeight:100,position:"absolute",zIndex:11}},t);e("body").append(n);if(s.screen){e("body").append('<div id="swm-screen" style="width:'+e("html").width()+"px;height:"+e("html").height()+"px;position:absolute;background:"+s.screenStyle.background+";opacity:"+s.screenStyle.opacity+";z-index:"+s.screenStyle.zIndex+';display:none;top:0;left:0;"></div>')}this.hide().css(s.style).append('<span class="swm-close" style="position: absolute; top: 5px; right: 10px; cursor: pointer;">close</span>');e(".swm-close").click(function(){n.crouch()});e("body").mouseleave(function(e){if(e.offsetY<=0||e.clientY<=0){n.jump();var t=10,r=10,i=n.height(),s=n.width(),o=parseInt(n.css("padding-top")),u=parseInt(n.css("padding-left"));if(e.view.innerHeight>i+2*o){t=Math.floor((e.view.innerHeight-i-2*o)/2)+pageYOffset}else{i=e.view.innerHeight-20-2*o}if(e.view.innerWidth>s+2*u){r=Math.floor((e.view.innerWidth-s-2*u)/2)+pageXOffset}else{s=e.view.innerWidth-20-2*u}n.css({top:t,left:r,width:s,height:i})}});this.jump=function(){this.show().data("show",true);e("#swm-screen").show()};this.crouch=function(){this.hide().data("show",false);e("#swm-screen").hide()};return this}})(jQuery)