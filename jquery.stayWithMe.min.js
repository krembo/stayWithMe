(function(e){e.fn.stayWithMe=function(t){var n=this,r=n.width(),i=n.height();var s=e.extend(true,{screen:false,screenStyle:{background:"#fff",opacity:.8,zIndex:10},style:{color:"#fff",backgroundColor:"#4679bd",borderRadius:10,padding:"20px 15px",width:r,height:i,minWidth:200,minHeight:100,position:"absolute",zIndex:11},moveOnScroll:false},t);e("body").append(n);if(s.screen){e("body").append('<div id="swm-screen" style="width:'+e("html").width()+"px;height:"+e("html").height()+"px;position:absolute;background:"+s.screenStyle.background+";opacity:"+s.screenStyle.opacity+";z-index:"+s.screenStyle.zIndex+';display:none;top:0;left:0;"></div>')}this.hide().css(s.style).append('<span class="swm-close" style="position: absolute; top: 5px; right: 10px; cursor: pointer;">close</span>');e(".swm-close").click(function(){n.crouch()});this.recalculate=function(){var e=10,t=10,r=n.height(),i=n.width(),s=parseInt(n.css("padding-top")),o=parseInt(n.css("padding-left"));if(window.innerHeight>r+2*s){e=Math.floor((window.innerHeight-r-2*s)/2)+pageYOffset}else{r=window.innerHeight-20-2*s}if(window.innerWidth>i+2*o){t=Math.floor((window.innerWidth-i-2*o)/2)+pageXOffset}else{i=window.innerWidth-20-2*o}n.css({top:e,left:t,width:i,height:r})};e("body").mouseleave(function(e){if(e.offsetY<=0||e.clientY<=0){n.jump();n.recalculate()}});if(s.moveOnScroll){e(document).scroll(function(e){if(n.data("show")){n.recalculate()}})}this.jump=function(){this.show().data("show",true);e("#swm-screen").show()};this.crouch=function(){this.hide().data("show",false);e("#swm-screen").hide()};return this}})(jQuery)